/*
 * Copyright (c) 2018-2020, NVIDIA CORPORATION.  All rights reserved.
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation; either version 2 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful, but WITHOUT
 * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for
 * more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */

//new file created to support imx219 cameras on the auvidea X220/X221(fd)
#include <t19x-common-modules/tegra194-camera-rbpcv2-imx219-auvidea.dtsi>
#include "dt-bindings/clock/tegra194-clock.h"

/*#define CAM0_PWDN	TEGRA194_MAIN_GPIO(P, 4)
#define CAM1_PWDN	TEGRA194_MAIN_GPIO(P, 5)
#define CAM2_PWDN	TEGRA194_MAIN_GPIO(Q, 5)
#define CAM_I2C_MUX 	TEGRA194_AON_GPIO(CC, 3)*/

#define CAM0_RST_L	TEGRA194_MAIN_GPIO(H, 3)
#define CAM0_PWDN	TEGRA194_MAIN_GPIO(H, 6)
#define CAM1_RST_L	TEGRA194_MAIN_GPIO(T, 6)
#define CAM1_PWDN	TEGRA194_MAIN_GPIO(T, 5)
#define SLVS_CAM0_RST_L	TEGRA194_MAIN_GPIO(Y, 1)


/ {
	/delete-node/ cam_i2cmux;

	

	i2c@31e0000 {
		status="okay";
		rbpcv2_imx219_a@10 {
			status = "okay";
			reset-gpios = <&tegra_main_gpio CAM1_PWDN GPIO_ACTIVE_HIGH>;
		};
	};
	/*i2c@3180000 {
		status="okay";
		rbpcv2_imx219_c@10 {
			status = "okay";
			reset-gpios = <&tegra_main_gpio CAM1_PWDN GPIO_ACTIVE_HIGH>;
		};
	};*/

	i2c@c240000 {
		status="okay";
		rbpcv2_imx219_g@10 {
			status = "okay";
			reset-gpios = <&tegra_main_gpio CAM0_PWDN GPIO_ACTIVE_HIGH>;
		};
	};



	/*i2c@3160000 {
		status="okay";
		rbpcv2_imx219_c@10 {
			status = "okay";
			reset-gpios = <&tegra_main_gpio CAM2_PWDN GPIO_ACTIVE_HIGH>;
		};
	};*/


	/*pinmux@2430000 {
		pinmux_default: common {
			soc_gpio44_pr0 {
				nvidia,pins = "soc_gpio44_pr0";
				nvidia,function = "rsvd2";
				nvidia,pull = <TEGRA_PIN_PULL_UP>;
				nvidia,tristate = <TEGRA_PIN_DISABLE>;
				nvidia,enable-input = <TEGRA_PIN_DISABLE>;
				nvidia,io-high-voltage = <TEGRA_PIN_DISABLE>;
				nvidia,lpdr = <TEGRA_PIN_DISABLE>;
			};
		};
	};*/

	gpio@2200000 {
		/*camera-trigger-high {
			status = "okay";
			gpio-hog;
			output-high;
			gpios = <TEGRA194_MAIN_GPIO(R, 0) 0>;  //gpios = <&tegra_main_gpio TEGRA194_MAIN_GPIO(R, 0) 0>;
			label = "cam-trigger";
		};'*/
		camera-control-output-low {
			gpio-hog;
			output-low;
			gpios = <CAM0_PWDN 0 CAM1_PWDN 0/* CAM2_PWDN 0*/>;
			label = "cam0-pwdn", "cam1-pwdn"/*, "cam2-pwdn"*/;
		}; 
	};
};
